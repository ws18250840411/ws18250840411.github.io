(this["webpackJsonpmobile-demo"]=this["webpackJsonpmobile-demo"]||[]).push([[0],{191:function(e,t){},311:function(e,t){},482:function(e,t,n){},484:function(e,t,n){},487:function(e,t,n){e.exports={wrapper:"style_wrapper__2JRWT",entry:"style_entry__3RrS4"}},509:function(e,t,n){e.exports={wrapper:"style_wrapper__3jEKn","wrapper-container":"style_wrapper-container___kmbD",video:"style_video__hNRlo",canvas:"style_canvas__3Ydpb"}},527:function(e,t,n){e.exports=n(839)},820:function(e,t){},821:function(e,t){},829:function(e,t){},830:function(e,t){},831:function(e,t){},832:function(e,t){},839:function(e,t,n){"use strict";n.r(t);n(528);var a,r=n(12),c=n.n(r),i=n(480),o=n(481),s=n.n(o),u=n(483),l=n.n(u),d=n(255),v=n.n(d),f=n(47),p=n.n(f),h=n(257),m=n.n(h),y=n(13),w=n(314),k=n.n(w),b=n(125),g=n.n(b),E=n(16),x=n(200),O=n.n(x),_=n(224),j=n.n(_).a.console,R=["log","error","info","warn","dir","table"],C=[],M={},S=n(482),D=n.n(S),U=((0,n(220).getMatcher)(g()({},D.a),"local"),[]),P=window.prompt,T=document.getElementById("ERUDA");k()(T)||((T=document.createElement("div")).setAttribute("data-eruda",!0),document.body.appendChild(T));var I=function(){var e=Object(y.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!k()(window.eruda)){e.next=4;break}return T.style.display="block",e.abrupt("return");case 4:return e.next=6,m.a.js("//cdn.jsdelivr.net/npm/eruda","eruda");case 6:t=e.sent,O()(C).call(C,(function(e){j[e]=j["_".concat(e)]})),t.init({container:T}),O()(C).call(C,(function(e){var t;O()(t=M[e]).call(t,(function(t){j[e].apply(j,Object(E.a)(t))}))})),T.style.display="block",window.eruda=t,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(e){var t,n;try{t=e.touches[0].pageX,n=e.touches[0].pageY}catch(r){console.error("[eruda] \u521d\u59cb\u5316\u5931\u8d25",r),L()}t>50||n>50||(a=v()((function(){"20160315"===P()&&I()}),3e3))},N=function(e){return clearTimeout(a)},L=function(){try{T.parentNode.removeChild(T)}catch(e){}};l()()||(document.body.addEventListener("touchstart",A),document.body.addEventListener("touchend",N),O()(R).call(R,(function(e){j["_".concat(e)]=j[e],M[e]=[],j[e]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return M[e].push(n),j["_".concat(e)].apply(j,n)},C.push(e)})),(s()(U).call(U,window.location.host)||Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"prod"}).REACT_APP_TEST)&&I());var W=n(511),B=n(46),z=n(847),G=n(484),K=n.n(G),F=n(485),H=n.n(F),J=n(129),V=n.n(J),Y=n(486),q=n.n(Y),X=n(488),Q=n(487),Z=n.n(Q),$=(0,n(220).getMatcher)(g()({},Z.a),"local");var ee=function(){var e=Object(r.useRef)(),t=Object(r.useRef)();return c.a.createElement("div",{className:$("wrapper"),key:"".concat("kO1d","11")},c.a.createElement("p",{key:"".concat("kO1d","21")},"Simple Video Recording using RecordRTC"),c.a.createElement("br",{key:"".concat("kO1d","31")}),c.a.createElement("div",{style:{display:"flex"},key:"".concat("kO1d","12")},c.a.createElement(X.a,{id:"btn-start-recording",inline:!0,onClick:function(){var n;n=function(n){e.current.muted=!0,e.current.volume=0,e.current.srcObject=n,t.current=q()(n,{type:"video"}),t.current.startRecording(),t.current.camera=n},void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new V.a((function(n,a){t.call(navigator,e,n,a)})):V.a.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){n(e)})).catch((function(e){alert("Unable to capture your camera. Please check console logs."),console.error(e)}))},key:"".concat("kO1d","41")},"Start Recording"),c.a.createElement(X.a,{id:"btn-stop-recording",inline:!0,onClick:function(){var n;null===t||void 0===t||null===(n=t.current)||void 0===n||n.stopRecording((function(){e.current.src=e.current.srcObject=null,e.current.muted=!1,e.current.volume=1,e.current.src=H.a.createObjectURL(t.current.getBlob()),t.current.camera.stop(),t.current.destroy(),t.current=null}))},key:"".concat("kO1d","42")},"Stop Recording")),c.a.createElement("br",{key:"".concat("kO1d","32")}),c.a.createElement("video",{controls:!0,autoPlay:!0,playsInline:!0,style:{width:"100%"},ref:e,key:"".concat("kO1d","51")}))},te=n(15),ne=n(14),ae=n(510),re=n(0),ce=n(265),ie=function(){var e=Object(y.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new V.a((function(n,a){t.call(navigator,e,n,a)})):V.a.reject(new Error("getUserMedia is not implemented in this browser"))}),e.abrupt("return",navigator.mediaDevices.getUserMedia(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=n(317),se=n.n(oe),ue=se()();var le=window.requestAnimationFrame||function(e){var t=se()(),n=Math.max(0,16-(t-ue)),a=v()(e,n);return ue=t+n,a},de=window.cancelAnimationFrame||window.clearTimeout;var ve=function(){function e(t,n){Object(te.a)(this,e),this.video=t,this.canvas=n,this.ctx=null,this.model=null,this.rafId=null,this.init()}return Object(ne.a)(e,[{key:"init",value:function(){var e=Object(y.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setWasmPaths();case 2:return e.next=4,this.setBackend();case 4:return e.next=6,this.setupCamera();case 6:return e.next=8,this.setupPage();case 8:return e.next=10,this.load();case 10:return e.next=12,this.render();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWasmPaths",value:function(){var e=Object(y.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce&&ce.setWasmPaths("https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat(ce.version_wasm,"/dist/"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setBackend",value:function(){var e=Object(y.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.rc("wasm");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setupCamera",value:function(){var e=Object(y.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.video){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ie({audio:!1,video:{facingMode:"user"}});case 4:return t=e.sent,this.video.srcObject=t,e.abrupt("return",new V.a((function(e){n.video.onloadedmetadata=function(){e(n.video)}})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupPage",value:function(){var e=Object(y.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.video&&this.canvas){e.next=2;break}return e.abrupt("return");case 2:this.video.play(),t=this.video.videoWidth,n=this.video.videoHeight,this.video.width=t,this.video.height=n,this.canvas.width=t,this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="rgba(255, 0, 0, 0.5)";case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(y.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.a();case 2:this.model=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(y.a)(p.a.mark((function e(){var t,n,a,r,c,i,o,s,u,l,d,v=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,!0,n=!0,e.next=5,this.model.estimateFaces(this.video,t,!0,n);case 5:if((a=e.sent).length>0)for(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),r=0;r<a.length;r++)if(t&&(a[r].topLeft=a[r].topLeft.arraySync(),a[r].bottomRight=a[r].bottomRight.arraySync(),n&&(a[r].landmarks=a[r].landmarks.arraySync())),c=a[r].topLeft,i=a[r].bottomRight,o=[i[0]-c[0],i[1]-c[1]],this.ctx.fillStyle="rgba(255, 0, 0, 0.5)",this.ctx.fillRect(c[0],c[1],o[0],o[1]),n)for(s=a[r].landmarks,this.ctx.fillStyle="blue",u=0;u<s.length;u++)l=s[u][0],d=s[u][1],this.ctx.fillRect(l,d,5,5);this.rafId=(f=function(){return v.render()},le.call(window,f));case 8:case"end":return e.stop()}var f}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destory",value:function(){var e;e=this.rafId,de.call(window,e)}}]),e}(),fe=n(509),pe=n.n(fe),he=(0,n(220).getMatcher)(g()({},pe.a),"local");var me=function(){var e=Object(r.useRef)(),t=Object(r.useRef)();return Object(r.useEffect)((function(){e.current&&t.current&&new ve(e.current,t.current)}),[e,t]),c.a.createElement("div",{className:he("wrapper"),key:"".concat("yECc","11")},c.a.createElement("p",{key:"".concat("yECc","21")},"Blazeface Demo"),c.a.createElement("div",{className:he("wrapper-container"),key:"".concat("yECc","12")},c.a.createElement("video",{ref:e,className:he("video"),playsInline:!0,key:"".concat("yECc","31")}),c.a.createElement("canvas",{ref:t,className:he("canvas"),key:"".concat("yECc","41")})))};(0,n(220).getMatcher)(g()({},K.a),"local");function ye(){return c.a.createElement(z.a,{fallback:function(e,t){return c.a.createElement(z.a.Page,{error:e,onRetry:t,key:"".concat("oI7E","21")})},key:"".concat("oI7E","11")},c.a.createElement(W.a,{key:"".concat("oI7E","31")},c.a.createElement(B.a,{exact:!0,path:"/",component:ee,key:"".concat("oI7E","41")}),c.a.createElement(B.a,{exact:!0,path:"/blazeface",component:me,key:"".concat("oI7E","42")})))}Object(i.render)(c.a.createElement(ye,{key:"".concat("v4sz","11")}),document.getElementById("root"))}},[[527,1,2]]]);